
Showing logs for build [32mjoostvdg-environment-jx-aks-sta-nb5w6-7[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-nkqjh[0m
{"level":"warn","ts":1569331204.6422336,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1569331204.645034,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mjoostvdg-environment-jx-aks-sta-nb5w6-7[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-f2p47[0m
{"level":"warn","ts":1569331206.6619778,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1569331206.6651044,"logger":"fallback-logger","caller":"bash/main.go:65","msg":"Successfully executed command \"mkdir -p /workspace/source /workspace/source/env\""}

Showing logs for build [32mjoostvdg-environment-jx-aks-sta-nb5w6-7[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mjoostvdg-environment-jx-aks-sta-nb5w6-7[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-joostvdg-environment-jx-aks-sta-jqb65[0m
{"level":"warn","ts":1569331215.818816,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1569331216.941195,"logger":"fallback-logger","caller":"git/git.go:102","msg":"Successfully cloned https://github.com/********/environment-**-aks-staging.git @ v0.0.7 in path /workspace/source"}

Showing logs for build [32mjoostvdg-environment-jx-aks-sta-nb5w6-7[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:319dc136f3771e527a500fd780c38019590a7ba2
WARNING: no SHAs to merge, falling back to initial cloned commit

Showing logs for build [32mjoostvdg-environment-jx-aks-sta-nb5w6-7[0m stage [32mfrom-build-pack[0m and container [32mstep-setup-jx-git-credentials[0m
Generated Git credentials file /builder/home/git/credentials

Showing logs for build [32mjoostvdg-environment-jx-aks-sta-nb5w6-7[0m stage [32mfrom-build-pack[0m and container [32mstep-build-helm-apply[0m
Modified file /workspace/source/env/Chart.yaml to set the chart to version 7
Copying the helm source directory /workspace/source/env to a temporary location for building and applying /tmp/**-helm-apply-809376058/env
Applying helm chart at /tmp/**-helm-apply-809376058/env as release name ** to namespace **-staging
verifying the helm requirements versions in dir: . using version stream URL:  and git ref: 
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with ref refs/heads/master to /builder/home/.**/jenkins-x-versions
Ignoring templates/.gitignore
Ignoring templates/certificate.yaml
Ignoring templates/issuer.yaml
Wrote chart values.yaml /tmp/**-helm-apply-809376058/env/values.yaml generated from directory tree
generated helm /tmp/**-helm-apply-809376058/env/values.yaml

PipelineSecrets:
  DockerConfig: '{"auths":{"acctestaks1.azurecr.io":{"auth":"YWNjdGVzdGFrczE6MzVab00rWURreVk1SGpyalBOM3Y0U0t1cEIxVTVETDI="}}}'
cbcore:
  OperationsCenter:
    CSRF:
      ProxyCompatibility: true
    HostName: cbcore.staging.**-aks.kearos.net
    Ingress:
      Annotations:
        kubernetes.io/ingress.class: nginx
        kubernetes.io/tls-acme: "true"
        nginx.ingress.kubernetes.io/proxy-body-size: 50m
        nginx.ingress.kubernetes.io/proxy-request-buffering: "off"
        nginx.ingress.kubernetes.io/ssl-redirect: "true"
      tls:
        Enable: true
        Host: cbcore.staging.**-aks.kearos.net
        SecretName: tls-staging-**-aks-kearos-net-p
    ServiceType: ClusterIP
  nginx-ingress:
    Enabled: false
cleanup:
  Annotations:
    helm.sh/hook: pre-delete
    helm.sh/hook-delete-policy: hook-succeeded
  Args:
  - --cleanup
controllerbuild:
  enabled: true
controllerworkflow:
  enabled: false
dockerRegistry: acctestaks1.azurecr.io
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  Args:
  - --v
  - 4
  config:
    domain: staging.**-aks.kearos.net
    exposer: Ingress
    http: "false"
    tlsacme: "true"
grafana:
  ingress:
    annotations:
      kubernetes.io/ingress.class: nginx
      kubernetes.io/tls-acme: "true"
    enabled: true
    hosts:
    - grafana.staging.**-aks.kearos.net
    tls:
    - hosts:
      - grafana.staging.**-aks.kearos.net
      secretName: tls-staging-**-aks-kearos-net-p
jenkins:
  Servers:
    Global:
      EnvVars:
        TILLER_NAMESPACE: kube-system
  enabled: false
prow: {}

Using values files: /tmp/**-helm-apply-809376058/env/values.yaml
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: jenkins-x-chartmuseum http://jenkins-x-chartmuseum:8080
Successfully added Helm repository jenkins-x-chartmuseum.
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: chartmuseum.jenkins-x.io http://chartmuseum.jenkins-x.io
Successfully added Helm repository chartmuseum.jenkins-x.io.
Adding missing Helm repo: raw.githubusercontent.com https://raw.githubusercontent.com/********/helm-repo/master/
Successfully added Helm repository raw.githubusercontent.com.
Adding missing Helm repo: charts.cloudbees.com https://charts.cloudbees.com/public/cloudbees
Successfully added Helm repository charts.cloudbees.com.
Applying Apps chart overrides
Applying chart overrides
error: upgrading helm chart '.': failed to run 'kubectl apply --recursive -f /tmp/helm-template-workdir-894596214/**/output/namespaces/**-staging -l jenkins.io/chart-release=** --namespace **-staging --wait --validate=false' command in directory '/tmp/**-helm-apply-809376058/env', output: 'configmap/jenkins-agent configured
clusterrole.rbac.authorization.k8s.io/cjoc-master-management-**-staging created
clusterrolebinding.rbac.authorization.k8s.io/cjoc-role-binding-**-staging created
configmap/cjoc-configure-jenkins-groovy configured
ingress.extensions/cjoc configured
role.rbac.authorization.k8s.io/cjoc-master-management configured
rolebinding.rbac.authorization.k8s.io/cjoc-role-binding configured
serviceaccount/cjoc configured
warning: error calculating patch from openapi spec: map: map[value:-Djenkins.model.Jenkins.crumbIssuerProxyCompatibility=true] does not contain declared merge key: name
service/cjoc configured
role.rbac.authorization.k8s.io/cjoc-agents configured
rolebinding.rbac.authorization.k8s.io/cjoc-master-role-binding configured
serviceaccount/jenkins configured
role.rbac.authorization.k8s.io/cleanup configured
rolebinding.rbac.authorization.k8s.io/cleanup configured
serviceaccount/cleanup configured
configmap/exposecontroller configured
role.rbac.authorization.k8s.io/expose configured
rolebinding.rbac.authorization.k8s.io/expose configured
serviceaccount/expose configured
clusterrole.rbac.authorization.k8s.io/**-grafana-clusterrole configured
clusterrolebinding.rbac.authorization.k8s.io/**-grafana-clusterrolebinding configured
configmap/**-grafana configured
deployment.apps/**-grafana configured
ingress.extensions/**-grafana configured
podsecuritypolicy.extensions/**-grafana configured
role.rbac.authorization.k8s.io/**-grafana configured
rolebinding.rbac.authorization.k8s.io/**-grafana configured
secret/**-grafana configured
service/**-grafana configured
serviceaccount/**-grafana configured
configmap/**-grafana-test configured
podsecuritypolicy.extensions/**-grafana-test configured
role.rbac.authorization.k8s.io/**-grafana-test configured
rolebinding.rbac.authorization.k8s.io/**-grafana-test configured
serviceaccount/**-grafana-test configured
deployment.apps/**-ldap configured
service/**-ldap configured
certificate.certmanager.k8s.io/tls-staging-**-aks-kearos-net-p configured
issuer.certmanager.k8s.io/letsencrypt-prod configured
error: error when applying patch:

to:
Resource: "apps/v1, Resource=statefulsets", GroupVersionKind: "apps/v1, Kind=StatefulSet"
Name: "cjoc", Namespace: "**-staging"
Object: &{map["apiVersion":"apps/v1" "kind":"StatefulSet" "metadata":map["annotations":map["jenkins.io/chart":"env" "kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"StatefulSet\",\"metadata\":{\"annotations\":{\"jenkins.io/chart\":\"env\"},\"labels\":{\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\",\"component\":\"**-cjoc\",\"heritage\":\"Tiller\",\"jenkins.io/chart-release\":\"**\",\"jenkins.io/namespace\":\"**-staging\",\"jenkins.io/version\":\"6\",\"release\":\"**\"},\"name\":\"cjoc\",\"namespace\":\"**-staging\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\"}},\"serviceName\":\"cjoc\",\"template\":{\"metadata\":{\"labels\":{\"app\":\"cjoc\",\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\",\"component\":\"**-jenkins-master\",\"heritage\":\"Tiller\",\"release\":\"**\"},\"name\":\"cjoc\"},\"spec\":{\"containers\":[{\"env\":[{\"name\":\"ENVIRONMENT\",\"value\":\"KUBERNETES\"},{\"name\":\"JENKINS_OPTS\",\"value\":\"--prefix=/cjoc \"},{\"name\":\"JAVA_OPTS\",\"value\":\"-XshowSettings:vm -XX:MaxRAMFraction=1 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:+PrintGCDetails -Dcb.IMProp.warProfiles.cje=kubernetes.json -Dcom.cloudbees.opscenter.analytics.reporter.JocAnalyticsReporter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.reporter.metrics.AperiodicMetricSubmitter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.FeederConfiguration.PERIOD=120 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.fsGroup=1000 -Dhudson.lifecycle=hudson.lifecycle.ExitLifecycle -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.disableAutoConfiguration=true -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImageName=\\\"CloudBees Core - Managed Master - 2.176.2.3\\\" -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImage=cloudbees/cloudbees-core-mm:2.176.2.3 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.serviceAccount=jenkins\"}],\"image\":\"cloudbees/cloudbees-cloud-core-oc:2.176.2.3\",\"imagePullPolicy\":\"Always\",\"livenessProbe\":{\"failureThreshold\":12,\"httpGet\":{\"path\":\"/cjoc/login\",\"port\":8080},\"initialDelaySeconds\":300,\"timeoutSeconds\":5},\"name\":\"jenkins\",\"ports\":[{\"containerPort\":8080,\"name\":\"http\"},{\"containerPort\":50000}],\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"1G\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"1G\"}},\"volumeMounts\":[{\"mountPath\":\"/var/jenkins_home\",\"name\":\"jenkins-home\",\"readOnly\":false},{\"mountPath\":\"/var/jenkins_config/configure-jenkins.groovy.d\",\"name\":\"jenkins-configure-jenkins-groovy\",\"readOnly\":true}]}],\"securityContext\":{\"fsGroup\":1000,\"runAsUser\":1000},\"serviceAccountName\":\"cjoc\",\"terminationGracePeriodSeconds\":10,\"volumes\":[{\"configMap\":{\"name\":\"cjoc-configure-jenkins-groovy\"},\"name\":\"jenkins-configure-jenkins-groovy\"}]}},\"updateStrategy\":{\"type\":\"RollingUpdate\"},\"volumeClaimTemplates\":[{\"metadata\":{\"labels\":{\"app\":\"cjoc\",\"heritage\":\"Tiller\",\"release\":\"**\"},\"name\":\"jenkins-home\"},\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"20Gi\"}}}}]}}\n"] "creationTimestamp":"2019-09-24T12:50:00Z" "generation":'\x01' "labels":map["com.cloudbees.cje.tenant":"cjoc" "com.cloudbees.cje.type":"cjoc" "component":"**-cjoc" "heritage":"Tiller" "jenkins.io/chart-release":"**" "jenkins.io/namespace":"**-staging" "jenkins.io/version":"6" "release":"**"] "name":"cjoc" "namespace":"**-staging" "resourceVersion":"354814" "selfLink":"/apis/apps/v1/namespaces/**-staging/statefulsets/cjoc" "uid":"d213386a-dec9-11e9-b6fa-f602efc27c36"] "spec":map["podManagementPolicy":"OrderedReady" "replicas":'\x01' "revisionHistoryLimit":'\n' "selector":map["matchLabels":map["com.cloudbees.cje.tenant":"cjoc" "com.cloudbees.cje.type":"cjoc"]] "serviceName":"cjoc" "template"
:map["metadata":map["creationTimestamp":<nil> "labels":map["app":"cjoc" "com.cloudbees.cje.tenant":"cjoc" "com.cloudbees.cje.type":"cjoc" "component":"**-jenkins-master" "heritage":"Tiller" "release":"**"] "name":"cjoc"] "spec":map["containers":[map["env":[map["name":"ENVIRONMENT" "value":"KUBERNETES"] map["name":"JENKINS_OPTS" "value":"--prefix=/cjoc "] map["name":"JAVA_OPTS" "value":"-XshowSettings:vm -XX:MaxRAMFraction=1 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:+PrintGCDetails -Dcb.IMProp.warProfiles.cje=kubernetes.json -Dcom.cloudbees.opscenter.analytics.reporter.JocAnalyticsReporter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.reporter.metrics.AperiodicMetricSubmitter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.FeederConfiguration.PERIOD=120 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.fsGroup=1000 -Dhudson.lifecycle=hudson.lifecycle.ExitLifecycle -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.disableAutoConfiguration=true -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImageName=\"CloudBees Core - Managed Master - 2.176.2.3\" -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImage=cloudbees/cloudbees-core-mm:2.176.2.3 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.serviceAccount=jenkins"]] "image":"cloudbees/cloudbees-cloud-core-oc:2.176.2.3" "imagePullPolicy":"Always" "livenessProbe":map["failureThreshold":'\f' "httpGet":map["path":"/cjoc/login" "port":'\u1f90' "scheme":"HTTP"] "initialDelaySeconds":'\u012c' "periodSeconds":'\n' "successThreshold":'\x01' "timeoutSeconds":'\x05'] "name":"jenkins" "ports":[map["containerPort":'\u1f90' "name":"http" "protocol":"TCP"] map["containerPort":'\uc350' "protocol":"TCP"]] "resources":map["limits":map["cpu":"1" "memory":"1G"] "requests":map["cpu":"1" "memory":"1G"]] "terminationMessagePath":"/dev/termination-log" "terminationMessagePolicy":"File" "volumeMounts":[map["mountPath":"/var/jenkins_home" "name":"jenkins-home"] map["mountPath":"/var/jenkins_config/configure-jenkins.groovy.d" "name":"jenkins-configure-jenkins-groovy" "readOnly":%!q(bool=true)]]]] "dnsPolicy":"ClusterFirst" "restartPolicy":"Always" "schedulerName":"default-scheduler" "securityContext":map["fsGroup":'\u03e8' "runAsUser":'\u03e8'] "serviceAccount":"cjoc" "serviceAccountName":"cjoc" "terminationGracePeriodSeconds":'\n' "volumes":[map["configMap":map["defaultMode":'\u01a4' "name":"cjoc-configure-jenkins-groovy"] "name":"jenkins-configure-jenkins-groovy"]]]] "updateStrategy":map["type":"RollingUpdate"] "volumeClaimTemplates":[map["metadata":map["creationTimestamp":<nil> "labels":map["app":"cjoc" "heritage":"Tiller" "release":"**"] "name":"jenkins-home"] "spec":map["accessModes":["ReadWriteOnce"] "resources":map["requests":map["storage":"20Gi"]] "volumeMode":"Filesystem"] "status":map["phase":"Pending"]]]] "status":map["collisionCount":'\x00' "currentReplicas":'\x01' "currentRevision":"cjoc-7f574f7d8d" "observedGeneration":'\x01' "readyReplicas":'\x01' "replicas":'\x01' "updateRevision":"cjoc-7f574f7d8d" "updatedReplicas":'\x01']]}
for: "/tmp/helm-template-workdir-894596214/**/output/namespaces/**-staging/env/charts/cbcore/templates/part0-cjoc-statefulset.yaml": error when creating patch with:
original:
{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{"jenkins.io/chart":"env"},"labels":{"com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc","component":"**-cjoc","heritage":"Tiller","jenkins.io/chart-release":"**","jenkins.io/namespace":"**-staging","jenkins.io/version":"6","release":"**"},"name":"cjoc","namespace":"**-staging"},"spec":{"replicas":1,"selector":{"matchLabels":{"com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc"}},"serviceName":"cjoc","template":{"metadata":{"labels":{"app":"cjoc","com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc","component":"**-jenkins-master","heritage":"Tiller","release":"**"},"name":"cjoc"},"spec":{"containers":[{"env":[{"name":"ENVIRONMENT","value":"KUBERNETES"},{"name":"JENKINS_OPTS","value":"--prefix=/cjoc "},{"name":"JAVA_OPTS","value":"-XshowSettings:vm -XX:MaxRAMFraction=1 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:+PrintGCDetails -Dcb.IMProp.warProfiles.cje=kubernetes.json -Dcom.cloudbees.opscenter.analytics.reporter.JocAnalyticsReporter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.reporter.metrics.AperiodicMetricSubmitter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.FeederConfiguration.PERIOD=120 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.fsGroup=1000 -Dhudson.lifecycle=hudson.lifecycle.ExitLifecycle -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.disableAutoConfiguration=true -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImageName=\"CloudBees Core - Managed Master - 2.176.2.3\" -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImage=cloudbees/cloudbees-core-mm:2.176.2.3 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.serviceAccount=jenkins"}],"image":"cloudbees/cloudbees-cloud-core-oc:2.176.2.3","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":12,"httpGet":{"path":"/cjoc/login","port":8080},"initialDelaySeconds":300,"timeoutSeconds":5},"name":"jenkins","ports":[{"containerPort":8080,"name":"http"},{"containerPort":50000}],"resources":{"limits":{"cpu":"1","memory":"1G"},"requests":{"cpu":"1","memory":"1G"}},"volumeMounts":[{"mountPath":"/var/jenkins_home","name":"jenkins-home","readOnly":false},{"mountPath":"/var/jenkins_config/configure-jenkins.groovy.d","name":"jenkins-configure-jenkins-groovy","readOnly":true}]}],"securityContext":{"fsGroup":1000,"runAsUser":1000},"serviceAccountName":"cjoc","terminationGracePeriodSeconds":10,"volumes":[{"configMap":{"name":"cjoc-configure-jenkins-groovy"},"name":"jenkins-configure-jenkins-groovy"}]}},"updateStrategy":{"type":"RollingUpdate"},"volumeClaimTemplates":[{"metadata":{"labels":{"app":"cjoc","heritage":"Tiller","release":"**"},"name":"jenkins-home"},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"20Gi"}}}}]}}

modified:
{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{"jenkins.io/chart":"env","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"StatefulSet\",\"metadata\":{\"annotations\":{\"jenkins.io/chart\":\"env\"},\"labels\":{\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\",\"component\":\"**-cjoc\",\"heritage\":\"Tiller\",\"jenkins.io/chart-release\":\"**\",\"jenkins.io/namespace\":\"**-staging\",\"jenkins.io/version\":\"7\",\"release\":\"**\"},\"name\":\"cjoc\",\"namespace\":\"**-staging\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\"}},\"serviceName\":\"cjoc\",\"template\":{\"metadata\":{\"labels\":{\"app\":\"cjoc\",\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\",\"component\":\"**-jenkins-master\",\"heritage\":\"Tiller\",\"release\":\"**\"},\"name\":\"cjoc\"},\"spec\":{\"containers\":[{\"env\":[{\"name\":\"MASTER_GLOBAL_JAVA_OPTIONS\"},{\"value\":\"-Djenkins.model.Jenkins.crumbIssuerProxyCompatibility=true\"},{\"name\":\"ENVIRONMENT\",\"value\":\"KUBERNETES\"},{\"name\":\"JENKINS_OPTS\",\"value\":\"--prefix=/cjoc\"},{\"name\":\"JAVA_OPTS\",\"value\":\"-XshowSettings:vm -XX:MaxRAMFraction=1 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -Dcb.IMProp.warProfiles.cje=kubernetes.json -Dcom.cloudbees.opscenter.analytics.reporter.JocAnalyticsReporter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.reporter.metrics.AperiodicMetricSubmitter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.FeederConfiguration.PERIOD=120 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.fsGroup=1000 -Dhudson.lifecycle=hudson.lifecycle.ExitLifecycle -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.disableAutoConfiguration=true -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImageName=\\\"CloudBees Core - Managed Master - 2.176.3.3\\\" -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImage=cloudbees/cloudbees-core-mm:2.176.3.3 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.serviceAccount=jenkins-Djenkins.model.Jenkins.crumbIssuerProxyCompatibility=true\"}],\"image\":\"cloudbees/cloudbees-cloud-core-oc:2.176.3.3\",\"imagePullPolicy\":\"Always\",\"livenessProbe\":{\"failureThreshold\":12,\"httpGet\":{\"path\":\"/cjoc/login\",\"port\":8080},\"initialDelaySeconds\":300,\"timeoutSeconds\":5},\"name\":\"jenkins\",\"ports\":[{\"containerPort\":8080,\"name\":\"http\"},{\"containerPort\":50000}],\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"1G\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"1G\"}},\"volumeMounts\":[{\"mountPath\":\"/var/jenkins_home\",\"name\":\"jenkins-home\",\"readOnly\":false},{\"mountPath\":\"/var/jenkins_config/configure-jenkins.groovy.d\",\"name\":\"jenkins-configure-jenkins-groovy\",\"readOnly\":true}]}],\"securityContext\":{\"fsGroup\":1000,\"runAsUser\":1000},\"serviceAccountName\":\"cjoc\",\"terminationGracePeriodSeconds\":10,\"volumes\":[{\"configMap\":{\"name\":\"cjoc-configure-jenkins-groovy\"},\"name\":\"jenkins-configure-jenkins-groovy\"}]}},\"updateStrategy\":{\"type\":\"RollingUpdate\"},\"volumeClaimTemplates\":[{\"metadata\":{\"labels\":{\"app\":\"cjoc\",\"heritage\":\"Tiller\",\"release\":\"**\"},\"name\":\"jenkins-home\"},\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"20Gi\"}}}}]}}\n"},"labels":{"com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc","component":"**-cjoc","heritage":"Tiller","jenkins.io/chart-release":"**","jenkins.io/namespace":"**-staging","jenkins.io/version":"7","release":"**"},"name":"cjoc","namespace":"**-staging"},"spec":{"replicas":1,"selector":{"matchLabels":{"com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc"}},"serviceName":"cjoc","template":{"metadata":{"labels":{"app":"cjoc","com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc","component":"**-jenkins-master","heritage":"Ti
ller","release":"**"},"name":"cjoc"},"spec":{"containers":[{"env":[{"name":"MASTER_GLOBAL_JAVA_OPTIONS"},{"value":"-Djenkins.model.Jenkins.crumbIssuerProxyCompatibility=true"},{"name":"ENVIRONMENT","value":"KUBERNETES"},{"name":"JENKINS_OPTS","value":"--prefix=/cjoc"},{"name":"JAVA_OPTS","value":"-XshowSettings:vm -XX:MaxRAMFraction=1 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -Dcb.IMProp.warProfiles.cje=kubernetes.json -Dcom.cloudbees.opscenter.analytics.reporter.JocAnalyticsReporter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.reporter.metrics.AperiodicMetricSubmitter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.FeederConfiguration.PERIOD=120 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.fsGroup=1000 -Dhudson.lifecycle=hudson.lifecycle.ExitLifecycle -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.disableAutoConfiguration=true -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImageName=\"CloudBees Core - Managed Master - 2.176.3.3\" -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImage=cloudbees/cloudbees-core-mm:2.176.3.3 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.serviceAccount=jenkins-Djenkins.model.Jenkins.crumbIssuerProxyCompatibility=true"}],"image":"cloudbees/cloudbees-cloud-core-oc:2.176.3.3","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":12,"httpGet":{"path":"/cjoc/login","port":8080},"initialDelaySeconds":300,"timeoutSeconds":5},"name":"jenkins","ports":[{"containerPort":8080,"name":"http"},{"containerPort":50000}],"resources":{"limits":{"cpu":"1","memory":"1G"},"requests":{"cpu":"1","memory":"1G"}},"volumeMounts":[{"mountPath":"/var/jenkins_home","name":"jenkins-home","readOnly":false},{"mountPath":"/var/jenkins_config/configure-jenkins.groovy.d","name":"jenkins-configure-jenkins-groovy","readOnly":true}]}],"securityContext":{"fsGroup":1000,"runAsUser":1000},"serviceAccountName":"cjoc","terminationGracePeriodSeconds":10,"volumes":[{"configMap":{"name":"cjoc-configure-jenkins-groovy"},"name":"jenkins-configure-jenkins-groovy"}]}},"updateStrategy":{"type":"RollingUpdate"},"volumeClaimTemplates":[{"metadata":{"labels":{"app":"cjoc","heritage":"Tiller","release":"**"},"name":"jenkins-home"},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"20Gi"}}}}]}}

current:
{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{"jenkins.io/chart":"env","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"StatefulSet\",\"metadata\":{\"annotations\":{\"jenkins.io/chart\":\"env\"},\"labels\":{\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\",\"component\":\"**-cjoc\",\"heritage\":\"Tiller\",\"jenkins.io/chart-release\":\"**\",\"jenkins.io/namespace\":\"**-staging\",\"jenkins.io/version\":\"6\",\"release\":\"**\"},\"name\":\"cjoc\",\"namespace\":\"**-staging\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\"}},\"serviceName\":\"cjoc\",\"template\":{\"metadata\":{\"labels\":{\"app\":\"cjoc\",\"com.cloudbees.cje.tenant\":\"cjoc\",\"com.cloudbees.cje.type\":\"cjoc\",\"component\":\"**-jenkins-master\",\"heritage\":\"Tiller\",\"release\":\"**\"},\"name\":\"cjoc\"},\"spec\":{\"containers\":[{\"env\":[{\"name\":\"ENVIRONMENT\",\"value\":\"KUBERNETES\"},{\"name\":\"JENKINS_OPTS\",\"value\":\"--prefix=/cjoc \"},{\"name\":\"JAVA_OPTS\",\"value\":\"-XshowSettings:vm -XX:MaxRAMFraction=1 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:+PrintGCDetails -Dcb.IMProp.warProfiles.cje=kubernetes.json -Dcom.cloudbees.opscenter.analytics.reporter.JocAnalyticsReporter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.reporter.metrics.AperiodicMetricSubmitter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.FeederConfiguration.PERIOD=120 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.fsGroup=1000 -Dhudson.lifecycle=hudson.lifecycle.ExitLifecycle -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.disableAutoConfiguration=true -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImageName=\\\"CloudBees Core - Managed Master - 2.176.2.3\\\" -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImage=cloudbees/cloudbees-core-mm:2.176.2.3 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.serviceAccount=jenkins\"}],\"image\":\"cloudbees/cloudbees-cloud-core-oc:2.176.2.3\",\"imagePullPolicy\":\"Always\",\"livenessProbe\":{\"failureThreshold\":12,\"httpGet\":{\"path\":\"/cjoc/login\",\"port\":8080},\"initialDelaySeconds\":300,\"timeoutSeconds\":5},\"name\":\"jenkins\",\"ports\":[{\"containerPort\":8080,\"name\":\"http\"},{\"containerPort\":50000}],\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"1G\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"1G\"}},\"volumeMounts\":[{\"mountPath\":\"/var/jenkins_home\",\"name\":\"jenkins-home\",\"readOnly\":false},{\"mountPath\":\"/var/jenkins_config/configure-jenkins.groovy.d\",\"name\":\"jenkins-configure-jenkins-groovy\",\"readOnly\":true}]}],\"securityContext\":{\"fsGroup\":1000,\"runAsUser\":1000},\"serviceAccountName\":\"cjoc\",\"terminationGracePeriodSeconds\":10,\"volumes\":[{\"configMap\":{\"name\":\"cjoc-configure-jenkins-groovy\"},\"name\":\"jenkins-configure-jenkins-groovy\"}]}},\"updateStrategy\":{\"type\":\"RollingUpdate\"},\"volumeClaimTemplates\":[{\"metadata\":{\"labels\":{\"app\":\"cjoc\",\"heritage\":\"Tiller\",\"release\":\"**\"},\"name\":\"jenkins-home\"},\"spec\":{\"accessModes\":[\"ReadWriteOnce\"],\"resources\":{\"requests\":{\"storage\":\"20Gi\"}}}}]}}\n"},"creationTimestamp":"2019-09-24T12:50:00Z","generation":1,"labels":{"com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc","component":"**-cjoc","heritage":"Tiller","jenkins.io/chart-release":"**","jenkins.io/namespace":"**-staging","jenkins.io/version":"6","release":"**"},"name":"cjoc","namespace":"**-staging","resourceVersion":"354814","selfLink":"/apis/apps/v1/namespaces/**-staging/statefulsets/cjoc","uid":"d213386a-dec9-11e9-b6fa-f602efc27c36"},"spec":{"podManagementPolicy":"OrderedReady","replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc"}},"serviceName":"cjoc","template":{"metadata":{"creationTimestamp":null,"lab
els":{"app":"cjoc","com.cloudbees.cje.tenant":"cjoc","com.cloudbees.cje.type":"cjoc","component":"**-jenkins-master","heritage":"Tiller","release":"**"},"name":"cjoc"},"spec":{"containers":[{"env":[{"name":"ENVIRONMENT","value":"KUBERNETES"},{"name":"JENKINS_OPTS","value":"--prefix=/cjoc "},{"name":"JAVA_OPTS","value":"-XshowSettings:vm -XX:MaxRAMFraction=1 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:+PrintGCDetails -Dcb.IMProp.warProfiles.cje=kubernetes.json -Dcom.cloudbees.opscenter.analytics.reporter.JocAnalyticsReporter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.reporter.metrics.AperiodicMetricSubmitter.PERIOD=120 -Dcom.cloudbees.opscenter.analytics.FeederConfiguration.PERIOD=120 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.fsGroup=1000 -Dhudson.lifecycle=hudson.lifecycle.ExitLifecycle -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.disableAutoConfiguration=true -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImageName=\"CloudBees Core - Managed Master - 2.176.2.3\" -Dcom.cloudbees.jce.masterprovisioning.DockerImageDefinitionConfiguration.masterImage=cloudbees/cloudbees-core-mm:2.176.2.3 -Dcom.cloudbees.masterprovisioning.kubernetes.KubernetesMasterProvisioning.serviceAccount=jenkins"}],"image":"cloudbees/cloudbees-cloud-core-oc:2.176.2.3","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":12,"httpGet":{"path":"/cjoc/login","port":8080,"scheme":"HTTP"},"initialDelaySeconds":300,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":5},"name":"jenkins","ports":[{"containerPort":8080,"name":"http","protocol":"TCP"},{"containerPort":50000,"protocol":"TCP"}],"resources":{"limits":{"cpu":"1","memory":"1G"},"requests":{"cpu":"1","memory":"1G"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/var/jenkins_home","name":"jenkins-home"},{"mountPath":"/var/jenkins_config/configure-jenkins.groovy.d","name":"jenkins-configure-jenkins-groovy","readOnly":true}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{"fsGroup":1000,"runAsUser":1000},"serviceAccount":"cjoc","serviceAccountName":"cjoc","terminationGracePeriodSeconds":10,"volumes":[{"configMap":{"defaultMode":420,"name":"cjoc-configure-jenkins-groovy"},"name":"jenkins-configure-jenkins-groovy"}]}},"updateStrategy":{"type":"RollingUpdate"},"volumeClaimTemplates":[{"metadata":{"creationTimestamp":null,"labels":{"app":"cjoc","heritage":"Tiller","release":"**"},"name":"jenkins-home"},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"20Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}]},"status":{"collisionCount":0,"currentReplicas":1,"currentRevision":"cjoc-7f574f7d8d","observedGeneration":1,"readyReplicas":1,"replicas":1,"updateRevision":"cjoc-7f574f7d8d","updatedReplicas":1}}

for: "/tmp/helm-template-workdir-894596214/**/output/namespaces/**-staging/env/charts/cbcore/templates/part0-cjoc-statefulset.yaml": map: map[value:-Djenkins.model.Jenkins.crumbIssuerProxyCompatibility=true] does not contain declared merge key: name'
[31m
Pipeline failed on stage 'from-build-pack' : container 'step-build-helm-apply'. The execution of the pipeline has stopped.[0m
